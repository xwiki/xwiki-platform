###
### Delete space confirm message
###
###
#template("startpage.vm")
<div class="main layoutsubsection">
<div id="mainContentArea">
#if ($message)
  <div id="xwikimessage">$message</div>
#end
#set ($cancelURL = $doc.getURL())
#if ($request.xredirect)
  #set ($redirectparam = "&amp;xredirect=$escapetool.url($request.xredirect)")
  #set ($cancelURL = $request.xredirect)
#end
#if ($xwiki.hasRecycleBin())
  #set ($confirmationMessage = $services.localization.render('core.space.recyclebin.confirm', ["<em>${escapetool.xml($doc.space)}</em>"]))
#else
  #set ($confirmationMessage = $services.localization.render('core.space.delete.confirm', ["<em>${escapetool.xml($doc.space)}</em>"]))
#end

#set($spaceParam = "space=$escapetool.url($doc.space)")
#set($collist = ['doc.name','doc.date', 'doc.author'])
#set($colprops = {})
#set($options = { 
  'translationPrefix' : 'platform.index.',
  'extraParams': $spaceParam,
  'rowCount' : 50,
  'queryFilters' : 'unique'
})

#define($spaceIndexLiveTable) #livetable("deleteSpaceIndex" $collist $colprops $options) #end
## bad hack: remove the macro markers
#set($spaceIndexLiveTable=$stringtool.remove($spaceIndexLiveTable,'{{html}}'))
#set($spaceIndexLiveTable=$stringtool.remove($spaceIndexLiveTable,'{{/html}}'))

#set($confirmationMessage="$confirmationMessage <br /> $spaceIndexLiveTable")
#xwikimessagebox($services.localization.render('core.delete') $confirmationMessage $doc.getURL('deletespace', "confirm=1$!{redirectparam}&amp;form_token=$!{services.csrf.getToken()}") $escapetool.xml($cancelURL) $services.localization.render('yes') $services.localization.render('no'))
<div class="clearfloats"></div>
</div>## mainContentArea
</div>## main
#template("endpage.vm")