<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc>
  <web>Invitation</web>
  <name>InvitationConfig</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <parent>Invitation.WebHome</parent>
  <creator>xwiki:XWiki.Admin</creator>
  <author>xwiki:XWiki.Admin</author>
  <customClass/>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <creationDate>1287995725000</creationDate>
  <date>1287996668000</date>
  <contentUpdateDate>1287996668000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <template/>
  <defaultTemplate/>
  <validationScript/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.0</syntaxId>
  <hidden>true</hidden>
  <object>
    <class>
      <name>XWiki.ConfigurableClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <codeToExecute>
        <disabled>0</disabled>
        <editor>---</editor>
        <name>codeToExecute</name>
        <number>7</number>
        <picker>0</picker>
        <prettyName>codeToExecute</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </codeToExecute>
      <configurationClass>
        <disabled>0</disabled>
        <name>configurationClass</name>
        <number>3</number>
        <picker>0</picker>
        <prettyName>configurationClass</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </configurationClass>
      <configureGlobally>
        <defaultValue/>
        <disabled>0</disabled>
        <displayFormType>checkbox</displayFormType>
        <displayType/>
        <name>configureGlobally</name>
        <number>4</number>
        <prettyName>configureGlobally</prettyName>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </configureGlobally>
      <displayInSection>
        <disabled>0</disabled>
        <name>displayInSection</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>displayInSection</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </displayInSection>
      <heading>
        <disabled>0</disabled>
        <name>heading</name>
        <number>2</number>
        <picker>0</picker>
        <prettyName>heading</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </heading>
      <iconAttachment>
        <disabled>0</disabled>
        <name>iconAttachment</name>
        <number>8</number>
        <picker>0</picker>
        <prettyName>iconAttachment</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </iconAttachment>
      <linkPrefix>
        <disabled>0</disabled>
        <name>linkPrefix</name>
        <number>5</number>
        <picker>0</picker>
        <prettyName>linkPrefix</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </linkPrefix>
      <propertiesToShow>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>input</displayType>
        <multiSelect>1</multiSelect>
        <name>propertiesToShow</name>
        <number>6</number>
        <picker>0</picker>
        <prettyName>propertiesToShow</prettyName>
        <relationalStorage>1</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>20</size>
        <sort>none</sort>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <values/>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </propertiesToShow>
    </class>
    <name>Invitation.InvitationConfig</name>
    <number>0</number>
    <className>XWiki.ConfigurableClass</className>
    <guid>ce538a91-32b8-4623-9367-090c256e9c2d</guid>
    <property>
      <configurationClass>Invitation.WebHome</configurationClass>
    </property>
    <property>
      <configureGlobally>1</configureGlobally>
    </property>
    <property>
      <displayInSection>Invitation</displayInSection>
    </property>
    <property>
      <propertiesToShow>
        <value>subjectLineTemplate</value>
        <value>messageBodyTemplate</value>
        <value>emailRegex</value>
        <value>from_address</value>
        <value>allowUsersOfOtherWikis</value>
        <value>usersMayPersonalizeMessage</value>
        <value>usersMaySendToMultiple</value>
        <value>emailClass</value>
        <value>emailContainer</value>
      </propertiesToShow>
    </property>
  </object>
  <object>
    <class>
      <name>XWiki.ConfigurableClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <codeToExecute>
        <disabled>0</disabled>
        <editor>---</editor>
        <name>codeToExecute</name>
        <number>7</number>
        <picker>0</picker>
        <prettyName>codeToExecute</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </codeToExecute>
      <configurationClass>
        <disabled>0</disabled>
        <name>configurationClass</name>
        <number>3</number>
        <picker>0</picker>
        <prettyName>configurationClass</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </configurationClass>
      <configureGlobally>
        <defaultValue/>
        <disabled>0</disabled>
        <displayFormType>checkbox</displayFormType>
        <displayType/>
        <name>configureGlobally</name>
        <number>4</number>
        <prettyName>configureGlobally</prettyName>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </configureGlobally>
      <displayInSection>
        <disabled>0</disabled>
        <name>displayInSection</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>displayInSection</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </displayInSection>
      <heading>
        <disabled>0</disabled>
        <name>heading</name>
        <number>2</number>
        <picker>0</picker>
        <prettyName>heading</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </heading>
      <iconAttachment>
        <disabled>0</disabled>
        <name>iconAttachment</name>
        <number>8</number>
        <picker>0</picker>
        <prettyName>iconAttachment</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </iconAttachment>
      <linkPrefix>
        <disabled>0</disabled>
        <name>linkPrefix</name>
        <number>5</number>
        <picker>0</picker>
        <prettyName>linkPrefix</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </linkPrefix>
      <propertiesToShow>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>input</displayType>
        <multiSelect>1</multiSelect>
        <name>propertiesToShow</name>
        <number>6</number>
        <picker>0</picker>
        <prettyName>propertiesToShow</prettyName>
        <relationalStorage>1</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>20</size>
        <sort>none</sort>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <values/>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </propertiesToShow>
    </class>
    <name>Invitation.InvitationConfig</name>
    <number>1</number>
    <className>XWiki.ConfigurableClass</className>
    <guid>10608785-fe04-4114-a284-dfabc1ebfdee</guid>
    <property>
      <configurationClass>Invitation.WebHome</configurationClass>
    </property>
    <property>
      <configureGlobally>1</configureGlobally>
    </property>
    <property>
      <displayInSection>Invitation</displayInSection>
    </property>
    <property>
      <heading>$msg.get("xe.invitation.configuration.smtpHeading")</heading>
    </property>
    <property>
      <propertiesToShow>
        <value>smtp_server_password</value>
        <value>smtp_server_username</value>
        <value>smtp_port</value>
        <value>smtp_server</value>
        <value>javamail_extra_props</value>
      </propertiesToShow>
    </property>
  </object>
  <object>
    <class>
      <name>Invitation.WebHome</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <allowUsersOfOtherWikis>
        <defaultValue/>
        <disabled>0</disabled>
        <displayFormType>checkbox</displayFormType>
        <displayType/>
        <name>allowUsersOfOtherWikis</name>
        <number>4</number>
        <prettyName>Let users of other wikis send</prettyName>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </allowUsersOfOtherWikis>
      <commonPage>
        <disabled>0</disabled>
        <name>commonPage</name>
        <number>18</number>
        <picker>0</picker>
        <prettyName>common</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </commonPage>
      <emailClass>
        <disabled>0</disabled>
        <name>emailClass</name>
        <number>5</number>
        <picker>0</picker>
        <prettyName>Email message XClass</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </emailClass>
      <emailContainer>
        <disabled>0</disabled>
        <name>emailContainer</name>
        <number>9</number>
        <picker>0</picker>
        <prettyName>Document containing email XObjects</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </emailContainer>
      <emailRegex>
        <disabled>0</disabled>
        <name>emailRegex</name>
        <number>7</number>
        <picker>0</picker>
        <prettyName>Regular expression for validating email addresses</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </emailRegex>
      <from_address>
        <disabled>0</disabled>
        <name>from_address</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>Email "from" address</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </from_address>
      <guestsActionsPage>
        <disabled>0</disabled>
        <name>guestsActionsPage</name>
        <number>14</number>
        <picker>0</picker>
        <prettyName>guestsActions</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </guestsActionsPage>
      <javamail_extra_props>
        <disabled>0</disabled>
        <editor>---</editor>
        <name>javamail_extra_props</name>
        <number>15</number>
        <picker>0</picker>
        <prettyName>Javamail extra properties</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </javamail_extra_props>
      <mainPage>
        <disabled>0</disabled>
        <name>mainPage</name>
        <number>19</number>
        <picker>0</picker>
        <prettyName>mainPage</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </mainPage>
      <membersActionsPage>
        <disabled>0</disabled>
        <name>membersActionsPage</name>
        <number>16</number>
        <picker>0</picker>
        <prettyName>membersActions</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </membersActionsPage>
      <membersCommonPage>
        <disabled>0</disabled>
        <name>membersCommonPage</name>
        <number>17</number>
        <picker>0</picker>
        <prettyName>membersCommon</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </membersCommonPage>
      <messageBodyTemplate>
        <disabled>0</disabled>
        <editor>---</editor>
        <name>messageBodyTemplate</name>
        <number>3</number>
        <picker>0</picker>
        <prettyName>Email message body HTML template</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </messageBodyTemplate>
      <messageBodyTemplatePlain>
        <disabled>0</disabled>
        <editor>---</editor>
        <name>messageBodyTemplatePlain</name>
        <number>20</number>
        <picker>0</picker>
        <prettyName>Message body plain text template</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </messageBodyTemplatePlain>
      <smtp_port>
        <disabled>0</disabled>
        <name>smtp_port</name>
        <number>13</number>
        <picker>0</picker>
        <prettyName>Smtp port</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </smtp_port>
      <smtp_server>
        <disabled>0</disabled>
        <name>smtp_server</name>
        <number>12</number>
        <picker>0</picker>
        <prettyName>Smtp server host name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </smtp_server>
      <smtp_server_password>
        <disabled>0</disabled>
        <name>smtp_server_password</name>
        <number>11</number>
        <picker>0</picker>
        <prettyName>Smtp password</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </smtp_server_password>
      <smtp_server_username>
        <disabled>0</disabled>
        <name>smtp_server_username</name>
        <number>10</number>
        <picker>0</picker>
        <prettyName>Smtp username</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </smtp_server_username>
      <subjectLineTemplate>
        <disabled>0</disabled>
        <name>subjectLineTemplate</name>
        <number>2</number>
        <picker>0</picker>
        <prettyName>Email subject line template</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </subjectLineTemplate>
      <usersMayPersonalizeMessage>
        <defaultValue/>
        <disabled>0</disabled>
        <displayFormType>checkbox</displayFormType>
        <displayType/>
        <name>usersMayPersonalizeMessage</name>
        <number>8</number>
        <prettyName>Let users personalize messages</prettyName>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </usersMayPersonalizeMessage>
      <usersMaySendToMultiple>
        <defaultValue/>
        <disabled>0</disabled>
        <displayFormType>checkbox</displayFormType>
        <displayType/>
        <name>usersMaySendToMultiple</name>
        <number>6</number>
        <prettyName>Let users send to multiple addresses</prettyName>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </usersMaySendToMultiple>
    </class>
    <name>Invitation.InvitationConfig</name>
    <number>0</number>
    <className>Invitation.WebHome</className>
    <guid>922f917b-ccec-41a4-a288-0eb6bcd05e06</guid>
    <property>
      <allowUsersOfOtherWikis>0</allowUsersOfOtherWikis>
    </property>
    <property>
      <commonPage>Invitation.InvitationCommon</commonPage>
    </property>
    <property>
      <emailClass>Invitation.InvitationMailClass</emailClass>
    </property>
    <property>
      <emailContainer>Invitation.InvitationMessages</emailContainer>
    </property>
    <property>
      <emailRegex>/^([^@\s]+)@((?:[-a-zA-Z0-9]+\.)+[a-zA-Z]{2,})$/</emailRegex>
    </property>
    <property>
      <from_address>no-reply@localhost.localdomain</from_address>
    </property>
    <property>
      <guestsActionsPage>Invitation.InvitationGuestActions</guestsActionsPage>
    </property>
    <property>
      <javamail_extra_props/>
    </property>
    <property>
      <mainPage>Invitation.WebHome</mainPage>
    </property>
    <property>
      <membersActionsPage>Invitation.InvitationMemberActions</membersActionsPage>
    </property>
    <property>
      <membersCommonPage>Invitation.InvitationMembersCommon</membersCommonPage>
    </property>
    <property>
      <messageBodyTemplate>{{velocity}}
#set($discard = "#template('colorThemeInit.vm')")
#if("$!theme" == "")
 #set($theme = {"linkColor":"#4791BC"})
#end
#set($userName = $xwiki.getUserName($xcontext.getUser(), false))
#set($wikiName = $xwiki.getRequestURL().replaceAll("http://([^/:]*).*$", "$1"))
#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get("guestsActionsPage")).getExternalURL())
#set($linkStyle = "color:$theme.get('linkColor');text-decoration:none;")
#set($bigText = "font-size:130%;")
#set($joinLink = "float:left;")
#set($declineLink = "color:#f88;float:right;text-decoration:none;")

$msg.get("xe.invitation.emailContent.userHasInvitedYouToJoinWiki", [$userName, $wikiName])

{{html clean=false}}
#if("$!messageBody" != "")
  &lt;p style="$bigText"&gt;
  $!escapetool.xml($!messageBody)
  &lt;/p&gt;
#end
&lt;p style="margin-top:30px"&gt;
&lt;a href="${guestActionsURL}?doAction_accept=y&amp;amp;messageID=$messageID" style="$bigText$joinLink$linkStyle"&gt;
$msg.get("xe.invitation.emailContent.joinLink")
&lt;/a&gt;
&lt;a href="${guestActionsURL}?doAction_decline=y&amp;amp;messageID=$messageID" style="$bigText$declineLink"&gt;
 $msg.get("xe.invitation.emailContent.declineLink")
&lt;/a&gt;&lt;/p&gt;
&lt;hr style="clear:both" /&gt;
$msg.get("xe.invitation.emailContent.reportMessage", ["&lt;a href=$escapetool.getQ()${guestActionsURL}?doAction_report=y&amp;amp;messageID=$messageID$escapetool.getQ() style=$escapetool.getQ()$linkStyle$escapetool.getQ()&gt;", "&lt;/a&gt;"])
{{/html}}
{{/velocity}}</messageBodyTemplate>
    </property>
    <property>
      <messageBodyTemplatePlain>{{velocity}}
#set($userName = $xwiki.getUserName($xcontext.getUser(), false))#set($wikiName = $xwiki.getRequestURL().replaceAll("http://([^/:]*).*$", "$1"))#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get("guestsActionsPage")).getExternalURL())$msg.get("xe.invitation.emailContent.userHasInvitedYouToJoinWiki", [$userName, $wikiName])#if("$!messageBody" != "")  $messageBody#end$msg.get("xe.invitation.emailContent.joinLink")${guestActionsURL}?doAction_accept=y&amp;messageID=$messageID$msg.get("xe.invitation.emailContent.declineLink")${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID$msg.get("xe.invitation.emailContent.reportMessage", ["", "$util.getNewline()${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID"]){{/velocity}}</messageBodyTemplatePlain>
    </property>
    <property>
      <smtp_port>25</smtp_port>
    </property>
    <property>
      <smtp_server>localhost</smtp_server>
    </property>
    <property>
      <smtp_server_password/>
    </property>
    <property>
      <smtp_server_username/>
    </property>
    <property>
      <subjectLineTemplate>{{velocity}}$msg.get("xe.invitation.emailContent.subjectLine", [$xcontext.getUser().replaceAll("^[^\.]*.", ""), $xwiki.getRequestURL().replaceAll("http://([^/:]*).*$", "$1"), $!subjectLine]){{/velocity}}</subjectLineTemplate>
    </property>
    <property>
      <usersMayPersonalizeMessage>1</usersMayPersonalizeMessage>
    </property>
    <property>
      <usersMaySendToMultiple>0</usersMaySendToMultiple>
    </property>
  </object>
  <content>{{velocity}}{{info}}$msg.get("xe.invitation.internalDocument", ["Invitation.WebHome"]){{/info}}{{/velocity}}</content>
</xwikidoc>
