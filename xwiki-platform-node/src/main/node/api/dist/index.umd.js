(function(n,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("vue"),require("inversify")):typeof define=="function"&&define.amd?define(["exports","vue","inversify"],f):(n=typeof globalThis<"u"?globalThis:n||self,f(n.cristal_api={},n.vue,n.inversify))})(this,function(n,f,a){"use strict";function h(l,e,t){l.component(e,f.defineAsyncComponent(t))}class g{jsonld;constructor(e){this.jsonld=e}getIdentifier(){return this.jsonld.identifier}setIdentifier(e){this.jsonld.identifier=e}getName(){return this.jsonld.name}setName(e){this.jsonld.name=e}getText(){return this.jsonld.text}setText(e){this.jsonld.text=e}get(e){return this.jsonld[e]}set(e,t){this.jsonld[e]=t}getSource(){return this.jsonld}}class d{id;name;mode="";source;syntax;html;document;css;js;version;headline="";headlineRaw="";lastModificationDate;lastAuthor;canEdit=!0;constructor(e="",t="",i="",s=""){this.document=new g({}),this.source=i,this.syntax=s,this.html="",this.name=t,this.id=e,this.css=[],this.js=[],this.version=""}toObject(){return{id:this.id,name:this.name,source:this.source,syntax:this.syntax,html:this.html,document:this.document.getSource(),css:this.css,js:this.js,version:this.version}}fromObject(e){this.id=e.id,this.name=e.name,this.source=e.source,this.syntax=e.syntax,this.html=e.html,this.document=new g(e.document),this.css=e.css,this.js=e.js,this.version=e.version}}class c{constructor(){}}var v=Object.getOwnPropertyDescriptor,m=(l,e,t,i)=>{for(var s=i>1?void 0:i?v(e,t):e,o=l.length-1,r;o>=0;o--)(r=l[o])&&(s=r(s)||s);return s},u=(l,e)=>(t,i)=>e(t,i,l);n.DefaultLogger=class{constructor(e){this.loggerConfig=e}module;setModule(e){this.module=e}debug(...e){(!this.loggerConfig||this.loggerConfig.hasLevelId(this.module,4))&&e.unshift(this.module+":"),console.debug.apply(null,e)}info(...e){e.unshift(this.module+":"),console.info.apply(null,e)}warn(...e){e.unshift(this.module+":"),console.warn.apply(null,e)}error(...e){e.unshift(this.module+":"),console.error.apply(null,e)}},n.DefaultLogger=m([a.injectable(),u(0,a.inject("LoggerConfig")),u(0,a.optional())],n.DefaultLogger);var L=Object.getOwnPropertyDescriptor,p=(l,e,t,i)=>{for(var s=i>1?void 0:i?L(e,t):e,o=l.length-1,r;o>=0;o--)(r=l[o])&&(s=r(s)||s);return s};n.DefaultLoggerConfig=class{config;computedConfig;defaultLevel;defaultLevelId;levels=new Map;constructor(e="error"){this.config=new Map,this.defaultLevel=e,this.computedConfig=new Map,this.levels.set("error",1),this.levels.set("warn",2),this.levels.set("info",3),this.levels.set("debug",4)}addLevel(e,t){const i=this.levels.get(t);i!=null&&this.config.forEach(s=>{if(s.startsWith(e)){const o=this.computedConfig.get(s);(o==null||i&&i>o)&&i&&this.computedConfig.set(s,i)}})}getLevels(){return this.config}getLevel(e){let t=this.config.get(e);return t||(t=this.defaultLevel),t}getLevelId(e){const t=this.levels.get(e);return t||10}setDefaultLevel(e){this.defaultLevel=e,this.defaultLevelId=this.getLevelId(this.defaultLevel)}getDefaultLevel(){return this.defaultLevel}getDefaultLevelId(){return this.defaultLevelId?this.defaultLevelId:(this.defaultLevelId=this.getLevelId(this.defaultLevel),this.defaultLevelId)}hasLevel(e,t){let i=this.computedConfig.get(e);i||(i=this.getDefaultLevelId());const s=this.getLevelId(t);return!!(s&&i>=s)}hasLevelId(e,t){let i=this.computedConfig.get(e);i||(i=this.getDefaultLevelId());const s=t;return!!(s&&i>=s)}},n.DefaultLoggerConfig=p([a.injectable()],n.DefaultLoggerConfig);var D=Object.getOwnPropertyDescriptor,C=(l,e,t,i)=>{for(var s=i>1?void 0:i?D(e,t):e,o=l.length-1,r;o>=0;o--)(r=l[o])&&(s=r(s)||s);return s},j=(l,e)=>(t,i)=>e(t,i,l);n.DefaultWikiConfig=class{name;baseURL;baseRestURL;realtimeURL;authenticationBaseURL;authenticationManager;homePage;storage;serverRendering;designSystem;editor;offline;offlineSetup;storageRoot;cristal;logger;constructor(e){this.logger=e,this.logger.setModule("storage.components.defaultWikiStorage"),this.offlineSetup=!1}setConfig(e,t,i,s,o,r,O,w,y){Object.assign(this,{name:e,baseURL:t,baseRestURL:i,homePage:s,serverRendering:o,designSystem:r,offline:O,editor:w,...y})}setConfigFromObject(e){Object.assign(this,e)}setupOfflineStorage(){if(this.logger.debug("Checking offline storage"),this.offline&&this.cristal){this.logger.debug("Looking for wrapping offline storage");const e=this.cristal.getContainer().get("WrappingStorage");e?(this.logger.debug("Offline local storage is ready"),e.setStorage(this.storage),e.setWikiConfig(this.storage.getWikiConfig()),this.storage=e):this.logger.debug("Failed Looking for wrapping offline storage")}else this.cristal||this.logger.debug("Cristal not initialized"),this.offline||this.logger.debug("Offline mode not activated")}isSupported(e){return e=="html"}initialize(){this.offline&&!this.offlineSetup&&(this.setupOfflineStorage(),this.offlineSetup=!0,this.storage.isStorageReady())}defaultPageName(){return"index"}getType(){return"Default"}getNewPageDefaultName(){return"newpage"}},n.DefaultWikiConfig=C([a.injectable(),j(0,a.inject("Logger"))],n.DefaultWikiConfig),n.ComponentInit=c,n.DefaultPageData=d,n.JSONLDDocument=g,n.registerAsyncComponent=h,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
