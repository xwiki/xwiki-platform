{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport type { PageData } from \"@xwiki/cristal-api\";\nimport type { DocumentReference } from \"@xwiki/cristal-model-api\";\nimport type { Ref } from \"vue\";\n\n/**\n * @since 0.12\n * @beta\n */\ntype DocumentChange = \"update\" | \"delete\";\n\n/**\n * Provide the operation to access a document.\n *\n * @since 0.11\n * @beta\n */\ninterface DocumentService {\n  /**\n   * @returns the reference to the current document, the current document changes when setCurrentDocument is called\n   */\n  getCurrentDocument(): Ref<PageData | undefined>;\n\n  /**\n   * Returns a reference the document reference for the current document.\n   *\n   * @since 0.13\n   * @beta\n   */\n  getCurrentDocumentReference(): Ref<DocumentReference | undefined>;\n\n  /**\n   * Returns a serialized string of {@link getCurrentDocumentReference}.\n   *\n   * @since 0.13\n   * @beta\n   */\n  getCurrentDocumentReferenceString(): Ref<string | undefined>;\n\n  /**\n   * @returns the revision of the current document, or undefined if it's the last one\n   * @since 0.12\n   * @beta\n   */\n  getCurrentDocumentRevision(): Ref<string | undefined>;\n\n  /**\n   * @returns the current document action\n   * @since 0.23\n   */\n  getCurrentDocumentAction(): Ref<string | undefined>;\n\n  /**\n   * Return the document title, either with the defined title (from {@link getTitle}), or by using the name of the\n   * document reference.\n   *\n   * @since 0.14\n   * @beta\n   */\n  getDisplayTitle(): Ref<string>;\n\n  /**\n   * Return the defined document title, or undefined if no title is defined. To get a never empty title to display,\n   * see {@link getDisplayTitle}.\n   *\n   * @since 0.14\n   * @beta\n   */\n  getTitle(): Ref<string | undefined>;\n\n  /**\n   * @returns a ref to the loading state. true when the page is loading, false otherwise\n   */\n  isLoading(): Ref<boolean>;\n\n  /**\n   * @returns a ref to the error for the loading of the current document. undefined if no error happened\n   */\n  getError(): Ref<Error | undefined>;\n\n  /**\n   * Update the reference of the latest document.\n   * @param documentReference - the current document reference\n   * @param action - the current document action (default: \"view\")\n   * @param revision - the revision of the document, undefined for latest\n   *\n   * @since 0.23\n   * @beta\n   */\n  setCurrentDocument(\n    documentReference: string,\n    action?: string,\n    revision?: string,\n  ): Promise<void>;\n\n  /**\n   * Force reloading the content of the document without changing the current document reference\n   *\n   * @since 0.18\n   * @beta\n   */\n  refreshCurrentDocument(): Promise<void>;\n\n  /**\n   * Register a change listener that will be executed on any document change\n   * made on the whole Cristal instance.\n   * @param change - the kind of change\n   * @param listener - the listener to register\n   * @since 0.15\n   * @beta\n   */\n  registerDocumentChangeListener(\n    change: DocumentChange,\n    listener: (page: DocumentReference) => Promise<void>,\n  ): void;\n\n  /**\n   * Notify that a document change happened. This will execute all registered\n   * listeners for the given kind of change.\n   * @param change - the kind of change\n   * @param page - the reference to the changed document\n   * @since 0.15\n   * @beta\n   */\n  notifyDocumentChange(\n    change: DocumentChange,\n    page: DocumentReference,\n  ): Promise<void>;\n}\n\n/**\n * @beta\n */\nconst name: string = \"DocumentService\";\n\nexport { type DocumentChange, type DocumentService, name };\n"],"names":["name"],"mappings":"+OAwJA,MAAMA,EAAe"}