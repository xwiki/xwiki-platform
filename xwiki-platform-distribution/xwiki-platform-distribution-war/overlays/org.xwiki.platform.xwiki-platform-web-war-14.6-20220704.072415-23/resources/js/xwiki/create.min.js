'use strict';require(["jquery","xwiki-meta"],function(c,d){c(function(){var e=c("form#create"),f=e.find("input.location-name-field"),g=e.find("input.location-parent-field"),k=e.find('input[name="tocreate"]'),p=function(a){c("#templateprovider").attr("value",a)};e.on("submit",function(){var a=c('input[name="type"]:checked'),b=a.attr("data-type");if("blank"==b)return p(""),!0;if("template"==b)return a=a.val(),p(a),!0;if("office"==b){if(0<f.length&&0==f.val().trim().length)return!1;a:{if(0<g.length)if(a=
g.val(),""==a){if(k.prop("checked")){a=!1;break a}a=new XWiki.DocumentReference(d.wiki,f.val(),"WebHome")}else a=XWiki.Model.resolve(a,XWiki.EntityType.SPACE),k.prop("checked")?a=new XWiki.EntityReference(f.val(),XWiki.EntityType.DOCUMENT,a):(a=new XWiki.EntityReference(f.val(),XWiki.EntityType.SPACE,a),a=new XWiki.EntityReference("WebHome",XWiki.EntityType.DOCUMENT,a));else 0<c(".modal-popup").length?(a=XWiki.Model.resolve(c("#spaceReference").val(),XWiki.EntityType.SPACE),a=new XWiki.EntityReference(c("#name").val(),
XWiki.EntityType.DOCUMENT,a)):a=k.prop("checked")?d.documentReference.parent:d.documentReference;a=XWiki.Model.serialize(a.relativeTo(new XWiki.WikiReference(d.wiki)))}0!=a&&(window.location=(new XWiki.Document(new XWiki.DocumentReference(d.wiki,["XWiki"],"OfficeImporter"))).getURL("view","page="+encodeURIComponent(a)));return!1}});var l=!1,t=function(a){var b=g.val(),h=[];a.attr("data-allowed-spaces")&&(h=JSON.parse(a.attr("data-allowed-spaces")));a=b;0<h.length?(a=function(m){for(var n=0;n<h.length;n++){var q=
h[n],r=q+".";if("string"===typeof m&&(m===q||0==m.indexOf(r)))return!0}return!1},a(b)?a=b:(a=a(d.space)?d.space:h[0],l=!0)):l&&(a=d.space,l=!1);b!=a&&(g.val(a),g.trigger("input"))};e.find(".xwiki-select").on("xwiki:select:updated",function(a){a=c('input[name="type"]:checked');var b=!1;a.attr("data-terminal")&&(b=JSON.parse(a.attr("data-terminal")));k.prop("checked",b);t(a)});e.find(".xwiki-select").trigger("xwiki:select:updated")})});

//# sourceMappingURL=create.min.js.map
