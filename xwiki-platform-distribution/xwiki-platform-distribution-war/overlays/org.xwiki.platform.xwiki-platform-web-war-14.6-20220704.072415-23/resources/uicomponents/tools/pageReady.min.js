'use strict';define("xwiki-page-ready",[],function(){let d,f=new Promise(b=>{d=b}),k=0,g=new Map,l,a=(b,h)=>{clearTimeout(l);const e=k++;g.set(e,h);b.catch(()=>{}).finally(()=>{g.delete(e);g.size||(l=setTimeout(d,10))})};const c=b=>{f=f.then(b).catch(()=>{})};c(()=>{a=()=>{}});return{delayPageReady:function(){return a.apply(this,arguments)},getPendingDelays:()=>new Map(g),afterPageReady:c}});
require(["xwiki-page-ready"],function(d){document.documentElement.setAttribute("data-xwiki-page-ready",!1);const f=new Set;let k,g;const l=[function(){let a;d.delayPageReady(new Promise((c,b)=>{"complete"===document.readyState?c():window.addEventListener("load",a=c)}),"window:load");return()=>{window.removeEventListener("load",a)}}(),function(){const a=window.XMLHttpRequest.prototype.open;if(a!==k)return k=window.XMLHttpRequest.prototype.open=function(){try{const c=arguments[1];d.delayPageReady(new Promise((b,
h)=>{this.addEventListener("load",()=>{f.add(c)});this.addEventListener("loadend",b)}),`xhr:${c}`)}catch(c){}return a.apply(this,arguments)},()=>{}}(),function(){const a=window.fetch;if(a!==g)return g=window.fetch=function(){const c=a.apply(this,arguments);try{const b=arguments[0];d.delayPageReady(c.then(()=>{f.add(b)}),`fetch:${b}`)}catch(b){}return c},()=>{}}(),function(){const a=new MutationObserver(c=>{c.forEach(b=>{b.addedNodes.forEach(h=>{const e=h.src;"SCRIPT"!==h.tagName||"string"!==typeof e||
""===e||f.has(e)||d.delayPageReady(new Promise((m,n)=>{h.addEventListener("load",()=>{f.add(e);m()});h.addEventListener("error",n)}),`script:${e}`)})})});a.observe(document.querySelector("head"),{childList:!0});return()=>{a.disconnect()}}()];d.afterPageReady(()=>{l.forEach(a=>a());document.documentElement.setAttribute("data-xwiki-page-ready",!0)})});

//# sourceMappingURL=pageReady.min.js.map
