{"version":3,"file":"index.es.js","sources":["../src/defaultRemoteURLParserProvider.ts","../src/defaultRemoteURLSerializerProvider.ts","../src/componentInit.ts"],"sourcesContent":["/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { inject, injectable } from \"inversify\";\nimport type { RemoteURLParser } from \"./remoteURLParser\";\nimport type { RemoteURLParserProvider } from \"./remoteURLParserProvider\";\nimport type { CristalApp } from \"@xwiki/cristal-api\";\n\n/**\n * @since 0.12\n * @beta\n */\n@injectable()\nclass DefaultRemoteURLParserProvider implements RemoteURLParserProvider {\n  constructor(@inject(\"CristalApp\") private readonly cristalApp: CristalApp) {}\n\n  get(type?: string): RemoteURLParser | undefined {\n    const resolvedType = type || this.cristalApp.getWikiConfig().getType();\n    try {\n      return this.cristalApp\n        .getContainer()\n        .get(\"RemoteURLParser\", { name: resolvedType });\n    } catch (e) {\n      this.cristalApp\n        .getLogger(\"remote-url.api\")\n        .warn(`Couldn't resolve RemoteURLParser for type=[${resolvedType}]`, e);\n      return undefined;\n    }\n  }\n}\n\nexport { DefaultRemoteURLParserProvider };\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { inject, injectable } from \"inversify\";\nimport type { RemoteURLSerializer } from \"./remoteURLSerializer\";\nimport type { RemoteURLSerializerProvider } from \"./remoteURLSerializerProvider\";\nimport type { CristalApp } from \"@xwiki/cristal-api\";\n\n@injectable()\nclass DefaultRemoteURLSerializerProvider\n  implements RemoteURLSerializerProvider\n{\n  constructor(@inject(\"CristalApp\") private readonly cristalApp: CristalApp) {}\n\n  get(type?: string): RemoteURLSerializer | undefined {\n    const resolvedType = type || this.cristalApp.getWikiConfig().getType();\n    try {\n      return this.cristalApp\n        .getContainer()\n        .get(\"RemoteURLSerializer\", { name: resolvedType });\n    } catch (e) {\n      this.cristalApp\n        .getLogger(\"remote-url.api\")\n        .warn(\n          `Couldn't resolve RemoteURLSerializer for type=[${resolvedType}]`,\n          e,\n        );\n      return undefined;\n    }\n  }\n}\n\nexport { DefaultRemoteURLSerializerProvider };\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { DefaultRemoteURLParserProvider } from \"./defaultRemoteURLParserProvider\";\nimport { DefaultRemoteURLSerializerProvider } from \"./defaultRemoteURLSerializerProvider\";\nimport type { RemoteURLParserProvider } from \"./remoteURLParserProvider\";\nimport type { RemoteURLSerializerProvider } from \"./remoteURLSerializerProvider\";\nimport type { Container } from \"inversify\";\n\n/**\n * @beta\n */\nclass ComponentInit {\n  constructor(container: Container) {\n    container\n      .bind<RemoteURLParserProvider>(\"RemoteURLParserProvider\")\n      .to(DefaultRemoteURLParserProvider)\n      .inSingletonScope();\n    container\n      .bind<RemoteURLSerializerProvider>(\"RemoteURLSerializerProvider\")\n      .to(DefaultRemoteURLSerializerProvider)\n      .inSingletonScope();\n  }\n}\n\nexport { ComponentInit };\n"],"names":["DefaultRemoteURLParserProvider","cristalApp","type","resolvedType","e","__decorateClass","injectable","__decorateParam","DefaultRemoteURLSerializerProvider","ComponentInit","container"],"mappings":";;;;;;AA8BA,IAAMA,IAAN,MAAwE;AAAA,EACtE,YAAmDC,GAAwB;AAAxB,SAAA,aAAAA;AAAA,EAAyB;AAAA,EAE5E,IAAIC,GAA4C;AAC9C,UAAMC,IAAeD,KAAQ,KAAK,WAAW,cAAA,EAAgB,QAAA;AAC7D,QAAI;AACF,aAAO,KAAK,WACT,aAAA,EACA,IAAI,mBAAmB,EAAE,MAAMC,GAAc;AAAA,IAClD,SAASC,GAAG;AACV,WAAK,WACF,UAAU,gBAAgB,EAC1B,KAAK,8CAA8CD,CAAY,KAAKC,CAAC;AACxE;AAAA,IACF;AAAA,EACF;AACF;AAhBMJ,IAANK,EAAA;AAAA,EADCC,EAAA;AAAA,EAEcC,OAAO,YAAY,CAAA;AAAA,GAD5BP,CAAA;;;;;;ACJN,IAAMQ,IAAN,MAEA;AAAA,EACE,YAAmDP,GAAwB;AAAxB,SAAA,aAAAA;AAAA,EAAyB;AAAA,EAE5E,IAAIC,GAAgD;AAClD,UAAMC,IAAeD,KAAQ,KAAK,WAAW,cAAA,EAAgB,QAAA;AAC7D,QAAI;AACF,aAAO,KAAK,WACT,aAAA,EACA,IAAI,uBAAuB,EAAE,MAAMC,GAAc;AAAA,IACtD,SAASC,GAAG;AACV,WAAK,WACF,UAAU,gBAAgB,EAC1B;AAAA,QACC,kDAAkDD,CAAY;AAAA,QAC9DC;AAAA,MAAA;AAEJ;AAAA,IACF;AAAA,EACF;AACF;AArBMI,IAANH,EAAA;AAAA,EADCC,EAAA;AAAA,EAIcC,OAAO,YAAY,CAAA;AAAA,GAH5BC,CAAA;ACGN,MAAMC,EAAc;AAAA,EAClB,YAAYC,GAAsB;AAChC,IAAAA,EACG,KAA8B,yBAAyB,EACvD,GAAGV,CAA8B,EACjC,iBAAA,GACHU,EACG,KAAkC,6BAA6B,EAC/D,GAAGF,CAAkC,EACrC,iBAAA;AAAA,EACL;AACF;"}