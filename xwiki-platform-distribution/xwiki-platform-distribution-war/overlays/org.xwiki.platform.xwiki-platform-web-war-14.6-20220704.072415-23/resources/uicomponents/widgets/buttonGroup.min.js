'use strict';var XWiki=function(d){var f=d.widgets=d.widgets||{};f.ButtonGroup=Class.create({initialize:function(a){this.container=a;this.displayInsideParent=a.hasClassName("inside");this._dropDownMenu=a.down(".dropdown-menu");this._dropDownToggle=a.down(".dropdown-toggle");this._dropDownMenu&&this._dropDownToggle&&(this._dropDownToggle.observe("click",this._onClick.bindAsEventListener(this)),this._dropDownToggle.observe("keydown",this._onKeyDown.bindAsEventListener(this)),this._dropDownToggle.observe("blur",
this._scheduleClose.bind(this)),this._dropDownToggle.observe("focus",this._cancelClose.bind(this)),this._dropDownMenu.observe("click",this._scheduleClose.bindAsEventListener(this)),this._dropDownMenu.select("a, input, button").each(function(b){b.observe("blur",this._scheduleClose.bind(this));b.observe("focus",this._cancelClose.bind(this))}.bind(this)))},_onClick:function(a){a.stop();this._toggle()},_onKeyDown:function(a){27==a.keyCode&&this._toggle(!1)},_scheduleClose:function(a){var b=a&&"click"==
a.type;this._closing=!0;(function(){(this._closing||b)&&this._toggle(!1);delete this._closing}).bind(this).delay(.15)},_cancelClose:function(){this._closing=!1},_toggle:function(a){this._dropDownMenu.toggleClassName("open",a);this.displayInsideParent&&(this._dropDownMenu.hasClassName("open")?this.container.up().setStyle({height:this.container.up().getHeight()+this._dropDownMenu.getHeight()+"px"}):this.container.up().setStyle({height:""}))}});f.DynamicButtonGroup=Class.create({initialize:function(a){var b=
a.select("button, input.button, a").filter(function(e){return 0<e.offsetWidth});if(!(2>b.length)){b.each(function(e){e.up().hasClassName("buttonwrapper")&&e.up().insert({before:e}).remove()});a.removeClassName("dynamic-button-group").addClassName("buttonwrapper button-group initialized");b[0].insert({after:(new Element("a",{href:"#dropDownMenu","class":"dropdown-toggle"+(b[0].hasClassName("secondary")?" secondary":""),tabindex:0})).insert(new Element("span"))});for(var c=new Element("span",{"class":"dropdown-menu"}),
g=1;g<b.length;g++)c.insert(b[g].removeClassName("secondary"));b[0].next().insert({after:c});new f.ButtonGroup(a)}}});var h=function(a){(a&&a.memo.elements||[$("body")]).each(function(b){b.select(".button-group").each(function(c){c.hasClassName("initialized")||(new d.widgets.ButtonGroup(c),c.addClassName("initialized"))});b.select(".dynamic-button-group").each(function(c){new d.widgets.DynamicButtonGroup(c)})});return!0};d.domIsLoaded&&h()||document.observe("xwiki:dom:loaded",h);document.observe("xwiki:dom:updated",
h);return d}(XWiki||{});

//# sourceMappingURL=buttonGroup.min.js.map
