{"version":3,"file":"index.es.js","sources":["../src/collaborationManagerName.ts","../src/collaborationManagerProviderName.ts","../src/defaultCollaborationManagerProvider.ts","../src/componentInit.ts","../src/status.ts"],"sourcesContent":["/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\n/**\n * @beta\n */\nconst collaborationManagerName: string = \"collaborationManager\";\n\nexport { collaborationManagerName };\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\n/**\n * @beta\n */\nconst collaborationManagerProviderName: string = \"collaborationManagerProvider\";\n\nexport { collaborationManagerProviderName };\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { collaborationManagerName } from \"./collaborationManagerName\";\nimport { inject, injectable } from \"inversify\";\nimport type { CollaborationManager } from \"./collaborationManager\";\nimport type { CollaborationManagerProvider } from \"./collaborationManagerProvider\";\nimport type { CristalApp } from \"@xwiki/cristal-api\";\n\n/**\n * @since 0.20\n * @beta\n */\n@injectable()\nexport class DefaultCollaborationManagerProvider\n  implements CollaborationManagerProvider\n{\n  constructor(@inject(\"CristalApp\") private readonly cristalApp: CristalApp) {}\n\n  get(): CollaborationManager {\n    const hint = this.cristalApp.getWikiConfig().realtimeHint;\n    const container = this.cristalApp.getContainer();\n    if (hint && container.isBound(collaborationManagerName, { name: hint })) {\n      return container.get(collaborationManagerName, { name: hint });\n    } else {\n      return container.get(collaborationManagerName);\n    }\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { collaborationManagerProviderName } from \"./collaborationManagerProviderName\";\nimport { DefaultCollaborationManagerProvider } from \"./defaultCollaborationManagerProvider\";\nimport type { CollaborationManagerProvider } from \"./collaborationManagerProvider\";\nimport type { Container } from \"inversify\";\n\n/**\n * @since 0.20\n * @beta\n */\nclass ComponentInit {\n  constructor(container: Container) {\n    container\n      .bind<CollaborationManagerProvider>(collaborationManagerProviderName)\n      .to(DefaultCollaborationManagerProvider)\n      .inSingletonScope();\n  }\n}\n\nexport { ComponentInit };\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\n/**\n * Set of allowed provider states.\n *\n * @since 0.20\n * @beta\n */\nexport enum Status {\n  Disconnected,\n  Connecting,\n  Connected,\n}\n"],"names":["collaborationManagerName","collaborationManagerProviderName","DefaultCollaborationManagerProvider","cristalApp","hint","container","__decorateClass","injectable","__decorateParam","ComponentInit","Status"],"mappings":";AAuBA,MAAMA,IAAmC,wBCAnCC,IAA2C;;;;;;ACQ1C,IAAMC,IAAN,MAEP;AAAA,EACE,YAAmDC,GAAwB;AAAxB,SAAA,aAAAA;AAAA,EAAyB;AAAA,EAE5E,MAA4B;AAC1B,UAAMC,IAAO,KAAK,WAAW,cAAA,EAAgB,cACvCC,IAAY,KAAK,WAAW,aAAA;AAClC,WAAID,KAAQC,EAAU,QAAQL,GAA0B,EAAE,MAAMI,EAAA,CAAM,IAC7DC,EAAU,IAAIL,GAA0B,EAAE,MAAMI,GAAM,IAEtDC,EAAU,IAAIL,CAAwB;AAAA,EAEjD;AACF;AAdaE,IAANI,EAAA;AAAA,EADNC,EAAA;AAAA,EAIcC,OAAO,YAAY,CAAA;AAAA,GAHrBN,CAAA;ACFb,MAAMO,EAAc;AAAA,EAClB,YAAYJ,GAAsB;AAChC,IAAAA,EACG,KAAmCJ,CAAgC,EACnE,GAAGC,CAAmC,EACtC,iBAAA;AAAA,EACL;AACF;ACVO,IAAKQ,sBAAAA,OACVA,EAAAA,EAAA,eAAA,CAAA,IAAA,gBACAA,EAAAA,EAAA,aAAA,CAAA,IAAA,cACAA,EAAAA,EAAA,YAAA,CAAA,IAAA,aAHUA,IAAAA,KAAA,CAAA,CAAA;"}