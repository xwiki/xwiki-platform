'use strict';define(["jquery","xwiki-entityReference","xwiki-events-bridge"],function(f,e){return new function(){var a=this;a.init=function(){var b=f("html");if(void 0!==b.data("xwiki-reference")){a.documentReference=e.Model.resolve(b.data("xwiki-reference"),e.EntityType.DOCUMENT);var c=documentReference.extractReference(e.EntityType.WIKI),d=documentReference.extractReference(e.EntityType.SPACE);a.document=e.Model.serialize(documentReference.relativeTo(c));a.wiki=c.getName();a.space=e.Model.serialize(d.relativeTo(c));
a.page=documentReference.getName();a.version=b.data("xwiki-version");a.restURL=b.data("xwiki-rest-url");a.form_token=b.data("xwiki-form-token");c=b.data("xwiki-user-reference");a.userReference=c?e.Model.resolve(c,e.EntityType.DOCUMENT):null;a.isNew=b.data("xwiki-isnew");a.locale=b.data("xwiki-locale")}else for(b=f("meta"),c="document wiki space page version restURL form_token".split(" "),d=0;d<b.length;++d)for(var h=f(b[d]),k=h.attr("name"),g=0;g<c.length;++g)k==c[g]&&(a[k]=h.attr("content"))};a.setVersion=
function(b){a.version=b;f(document).trigger("xwiki:document:changeVersion",{version:a.version,documentReference})};a.refreshVersion=function(b){var c=a.restURL;c+="?media=json&timestamp="+(new Date).getTime();f.getJSON(c).then(d=>{a.setVersion(d.version)}).catch(d=>{404===d.status&&"function"===typeof b?b(d):console.error("Error while refreshing the version from URL "+c,d)})};a.init()}});

//# sourceMappingURL=meta.min.js.map
