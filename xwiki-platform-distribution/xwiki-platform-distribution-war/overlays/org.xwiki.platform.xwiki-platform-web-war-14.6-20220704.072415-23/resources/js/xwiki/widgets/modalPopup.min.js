'use strict';var XWiki=function(f){var c=f.widgets=f.widgets||{};c.ModalPopup=Class.create({options:{globalDialog:!0,title:"",displayCloseButton:!0,extraClassName:!1,screenColor:"",borderColor:"",titleColor:"",backgroundColor:"",screenOpacity:"0.5",verticalPosition:"center",horizontalPosition:"center",removeOnClose:!1,onClose:Prototype.emptyFunction},initialize:function(a,b,d){this.shortcuts={show:{method:this.showDialog,keys:["Ctrl+G","Meta+G"]},close:{method:this.closeDialog,keys:["Esc"]}};this.content=
a||"Hello world!";this.shortcuts=Object.extend(Object.clone(this.shortcuts),b||{});this.options=Object.extend(Object.clone(this.options),d||{});this.registerShortcuts("show")},createDialog:function(a){this.dialog=new Element("div",{"class":"xdialog-modal-container"});a=(new Element("div",{"class":"xdialog-screen"})).setStyle({opacity:this.options.screenOpacity,backgroundColor:this.options.screenColor});this.dialog.update(a);this.dialogBox=new Element("div",{"class":"xdialog-box"});this.options.extraClassName&&
this.dialogBox.addClassName(this.options.extraClassName);this.dialogBox._x_contentPlug=new Element("div",{"class":"xdialog-content"});this.dialogBox.update(this.dialogBox._x_contentPlug);this.dialogBox._x_contentPlug.update(this.content);if(this.options.title){var b=(new Element("div",{"class":"xdialog-title"})).update(this.options.title);b.setStyle({color:this.options.titleColor});this.dialogBox.insertBefore(b,this.dialogBox.firstChild)}this.options.displayCloseButton&&(a=(new Element("div",{"class":"xdialog-close",
title:"Close"})).update("&#215;"),a.observe("click",this.closeDialog.bindAsEventListener(this)),this.options.title?(b.insert({bottom:a}),this.options.titleColor&&a.setStyle({color:this.options.titleColor})):this.dialogBox.insertBefore(a,this.dialogBox.firstChild));this.dialog.appendChild(this.dialogBox);this.dialogBox.setStyle({textAlign:"left",borderColor:this.options.borderColor,backgroundColor:this.options.backgroundColor});switch(this.options.verticalPosition){case "top":this.dialogBox.setStyle({top:"0"});
break;case "bottom":this.dialogBox.setStyle({bottom:"0"});break;default:this.dialogBox.setStyle({top:"35%"})}switch(this.options.horizontalPosition){case "left":this.dialog.setStyle({textAlign:"left"});break;case "right":this.dialog.setStyle({textAlign:"right"});break;default:this.dialog.setStyle({textAlign:"center"}),this.dialogBox.setStyle({margin:"auto"})}$("body").appendChild(this.dialog);this.dialog.hide()},setClass:function(a){this.dialogBox.addClassName("xdialog-box-"+a)},removeClass:function(a){this.dialogBox.removeClassName("xdialog-box-"+
a)},setContent:function(a){this.content=a;this.dialogBox._x_contentPlug.update(this.content)},showDialog:function(a){a&&Event.stop(a);if(this.options.globalDialog){if(c.ModalPopup.active)return;c.ModalPopup.active=!0}else{if(this.active)return;this.active=!0}this.dialog||this.createDialog();this.attachKeyListeners();this.dialog.show()},closeDialog:function(a){a&&Event.stop(a);this.options.onClose.call(this);this.dialog.hide();this.options.removeOnClose&&this.dialog.remove();this.detachKeyListeners();
this.options.globalDialog?c.ModalPopup.active=!1:this.active=!1},attachKeyListeners:function(){for(var a in this.shortcuts)"show"!=a&&this.registerShortcuts(a)},detachKeyListeners:function(){for(var a in this.shortcuts)"show"!=a&&this.unregisterShortcuts(a)},registerShortcuts:function(a){var b=this.shortcuts[a].keys,d=this.shortcuts[a].method.bindAsEventListener(this,a);a=this.shortcuts[a].options;for(var e=0;e<b.length;++e)shortcut.add(b[e],d,a)},unregisterShortcuts:function(a){for(var b=0;b<this.shortcuts[a].keys.length;++b)shortcut.remove(this.shortcuts[a].keys[b])},
createButton:function(a,b,d,e,g){var h=new Element("span",{"class":"buttonwrapper"});a=new Element("input",{type:a,"class":"button",value:b,title:d,id:e});g&&a.addClassName(g);h.update(a);return h}});c.ModalPopup.active=!1;return f}(XWiki||{});

//# sourceMappingURL=modalPopup.min.js.map
