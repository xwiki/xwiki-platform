/*
 #set ($paths = {
  'css': {
    'macroWizard': $services.webjars.url('org.xwiki.contrib:application-ckeditor-webjar',
      'plugins/xwiki-macro/macroWizard.min.css', {'evaluate': true})
  }
})
#set ($l10nKeys = [
  'dashboard.gadgetSelector.title',
  'dashboard.gadgetEditor.title',
  'dashboard.gadgetEditor.changeGadget.label',
  'dashboard.gadgetEditor.gadgetTitle.label',
  'dashboard.gadgetEditor.gadgetTitle.hint'
])
#set ($l10n = {})
#foreach ($key in $l10nKeys)
  #set ($discard = $l10n.put($key, $services.localization.render($key)))
#end
#[[*/
'use strict';(function(n,e){define(["jquery","xwiki-ckeditor"],function(b,p){var h=b('<li class="macro-parameter" data-id="$gadgetTitle"><div class="macro-parameter-name"></div><div class="macro-parameter-description"></div><input type="text" class="macro-parameter-field" name="$gadgetTitle"/></li>');h.find(".macro-parameter-name").text(e["dashboard.gadgetEditor.gadgetTitle.label"]);h.find(".macro-parameter-description").text(e["dashboard.gadgetEditor.gadgetTitle.hint"]);b("head").append(b('<link type="text/css" rel="stylesheet"/>').attr("href",
n.css.macroWizard));var q=function(a){return new Promise((c,l)=>{require(["macroWizard"],function(g){c({ckeditor:a,macroWizard:g})})})},f;b(document).on("show.bs.modal",".macro-selector-modal",function(a){f&&!b(this).hasClass("gadget-selector-modal")&&(b(this).addClass("gadget-selector-modal"),a=b(this).find(".modal-title"),a.prop("oldText",a.text()).text(e["dashboard.gadgetSelector.title"]))});var k;b(document).on("ready",".macro-editor",function(){if(f){var a=b(this).closest(".modal");if(!a.hasClass("gadget-editor-modal")){k=
f.title;a.addClass("gadget-editor-modal");var c=a.find(".modal-title");c.prop("oldText",c.text()).text(e["dashboard.gadgetEditor.title"]);a=a.find(".modal-footer .btn-default").not('*[data-dismiss="modal"]');a.prop("oldText",a.text()).text(e["dashboard.gadgetEditor.changeGadget.label"])}a=h.clone();b(this).find(".macro-parameters").prepend(a);(c=k)||(c="$services.localization.render('rendering.macro."+b(this).attr("data-macroid").split("/")[0]+".name')");k=null;a.find("input").val(c).focus()}});var t=
function(a,c,l){f=a||{};var g=Promise,r=g.resolve;a=a&&"string"===typeof a.content?c.plugins.registered["xwiki-macro"].parseMacroCall(a.content):void 0;return r.call(g,l(a)).then(function(d){return{title:b('.macro-editor input[name="$gadgetTitle"]').val(),content:c.plugins.registered["xwiki-macro"].serializeMacroCall(d)}}).finally(function(){f=null;var d=b(".gadget-selector-modal").removeClass("gadget-selector-modal").find(".modal-title");d.text(d.prop("oldText"));d=b(".gadget-editor-modal").removeClass("gadget-editor-modal");
var m=d.find(".modal-title");m.text(m.prop("oldText"));d=d.find(".modal-footer .btn-default").not('*[data-dismiss="modal"]');d.text(d.prop("oldText"))})};return function(a){return Promise.resolve(p).then(q).then(c=>t(a,c.ckeditor,c.macroWizard))}})}).apply("]]#",$jsontool.serialize([$paths,$l10n]));

//# sourceMappingURL=gadgetWizard.min.js.map
