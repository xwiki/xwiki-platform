/*
 #set ($paths = {
  'selectize': $services.webjars.url('org.webjars:selectize.js', 'js/standalone/selectize.min')
})
#set ($l10n = {
  'selectTypedText': $services.localization.render('web.uicomponents.suggest.selectTypedText', ['{0}'])
})
#[[*/
'use strict';(function(p,q){require.config({paths:p,shim:{selectize:["jquery"]}});define("xwiki-selectize",["jquery","selectize","xwiki-events-bridge"],function(d,f){var h=function(a){var b=d('<div class="xwiki-selectize-option" data-value=""><span class="xwiki-selectize-option-icon"></span><span class="xwiki-selectize-option-label"></span></div>');b.attr("data-value",a&&"object"===typeof a?a.value:a);var c=a&&a.icon;"object"===typeof c?(!c.iconSetType&&c.url?c.iconSetType="IMAGE":!c.iconSetType&&
c.cssClass&&(c.iconSetType="FONT"),"IMAGE"===c.iconSetType?(c=d('<img class="xwiki-selectize-option-icon" alt="" />').attr("src",c.url),b.find(".xwiki-selectize-option-icon").replaceWith(c)):"FONT"===c.iconSetType?b.find(".xwiki-selectize-option-icon").addClass(c.cssClass):b.find(".xwiki-selectize-option-icon").remove()):b.find(".xwiki-selectize-option-icon").remove();c=a&&a.url;"string"===typeof c&&(c=d('<a class="xwiki-selectize-option-label"></a>').attr("href",c),b.find(".xwiki-selectize-option-label").replaceWith(c));
a=a&&"object"===typeof a?a.label||a.value:a;b.find(".xwiki-selectize-option-label").text(a);return b},g={copyClassesToDropdown:!1,dropdownParent:"body",highlight:!1,labelField:"label",loadThrottle:500,onDropdownClose:function(a){a.removeClass("active")},onDropdownOpen:function(a){a.addClass("active")},persist:!1,preload:"focus",render:{item:function(a){var b=h(a);a=a&&a.hint;"string"===typeof a&&""!==a&&b.attr("title",a);return b},option:function(a){var b=h(a);b.addClass("option");b.find(".xwiki-selectize-option-icon").wrap('<span class="xwiki-selectize-option-icon-wrapper"></span>');
a=a&&a.hint;"string"===typeof a&&""!==a&&b.append(d('<div class="xwiki-selectize-option-hint"></div>').text(a));return b},option_create:function(a,b){b=b(q.selectTypedText).replace("{0}","<em></em>");b=d('<div class="create option"></div>').html(b);b.find("em").text(a.input);return b}},searchField:["value","label","hint"],onType:function(a){a="function"===typeof this.settings.load&&!this.loadedSearches.hasOwnProperty(a);this.get$("wrapper").toggleClass(this.settings.loadingClass,a)},onInitialize:function(){this.get$("control").on("click",
"a.xwiki-selectize-option-label",function(a){a.preventDefault()})}},l=function(){var a=this.selectize,b=a.get$("wrapper");b.addClass(a.settings.loadingClass);a.loading++;a.items.reduce(function(c,e){return c.then(()=>r(a,e))},Promise.resolve()).finally(function(){a.loading=Math.max(a.loading-1,0);a.loading||b.removeClass(a.settings.loadingClass)})},r=function(a,b){return new Promise((c,e)=>{e="function"===typeof a.settings.loadSelected?a.settings.loadSelected:a.settings.load;b&&"function"===typeof e?
e.call(a,b,function(m){Array.isArray(m)&&m.forEach(function(k){var n=k[a.settings.valueField];a.options.hasOwnProperty(n)?a.updateOption(n,k):a.addOption(k)});c()}):c()})},u=function(){var a=this.selectize.positionDropdown;this.selectize.positionDropdown=function(){"body"===this.settings.dropdownParent&&a.call(this);"auto"===this.settings.dropdownWidth&&this.get$("dropdown").css({width:"","min-width":this.get$("control")[0].getBoundingClientRect().width})};t(this.selectize);this.selectize.settings.takeInputWidth&&
this.selectize.get$("control").width(d(this).data("initialWidth"));this.selectize.get$("control_input").attr("title",d(this).attr("title"))},t=function(a){var b=a.settings.dropdownAlignment;b||"body"===a.settings.dropdownParent||(b="left");b&&a.get$("dropdown").addClass("selectize-dropdown-"+b)};f.prototype.get$=function(a){return this["$"+a]};var v=function(a,b){var c=d.extend,e={};0===a.closest(".xform").length&&(e.dropdownWidth="auto");return c.call(d,{},g,e,b,a.data("xwiki-selectize"))},w=function(a){var b=
d(a).val();null===b&&d(a).attr("multiple")&&(b=[]);a=a.selectize.getValue();return Array.isArray(b)?Array.isArray(a)&&a.length===b.length&&a.every((c,e)=>c===b[e]):a===b},x=function(a){var b=a.selectize,c=d(a).val()||[];"string"===typeof c&&(c=c.split(b.settings.delimiter));b.clear(!0);c.forEach(e=>{b.options.hasOwnProperty(e)?b.addItem(e,!0):b.createItem(e,!1)});l.call(a)};d.fn.xwikiSelectize=function(a){this.each(function(){d(this).data("initialWidth",d(this).width())});return this.not(".selectized, .selectize-control").on("initialize",
u).on("change",function(b){w(this)?(b=d(this).closest(".xwiki-livetable-display-header-filter").closest(".xwiki-livetable").attr("id"))&&d(document).trigger("xwiki:livetable:"+b+":filtersChanged"):x(this)}).each(function(){var b=d(this).attr("id");d(this).removeAttr("id");d(this).selectize(v(d(this),a));b&&(this.selectize.get$("control_input").attr("id",b+"-selectized"),d("label").filter(function(){return d(this).attr("for")===b}).attr("for",b+"-selectized"),d(this).attr("id",b))}).trigger("initialize").each(l)}});
require(["jquery","xwiki-selectize","xwiki-events-bridge"],function(d){if(!d.fn.xwikiSelectize.initialized){d.fn.xwikiSelectize.initialized=!0;var f=function(h,g){d(g&&g.elements||document).find(".xwiki-selectize").xwikiSelectize()};d(document).on("xwiki:dom:updated",f);d(f)}})}).apply("]]#",$jsontool.serialize([$paths,$l10n]));

//# sourceMappingURL=xwiki.selectize.min.js.map
