{"version":3,"file":"index.es.js","sources":["../src/api/designSystemLoader.ts","../src/components/JSONLDDocument.ts","../src/components/DefaultPageData.ts","../src/components/componentsInit.ts","../src/components/defaultLogger.ts","../src/components/defaultLoggerConfig.ts","../src/components/defaultWikiConfig.ts"],"sourcesContent":["/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { defineAsyncComponent } from \"vue\";\nimport type {\n  App,\n  AsyncComponentLoader,\n  AsyncComponentOptions,\n  Component,\n  ComponentPublicInstance,\n} from \"vue\";\n\n/**\n * @since 0.1\n * @beta\n */\nexport interface DesignSystemLoader {\n  loadDesignSystem(app: App): void;\n}\n\n/**\n * Register a component as async to lazy-load it. Avoiding loading resources\n * from all design systems at once (e.g., creating CSS conflicts).\n * @param app - the app to load the component to\n * @param name - the name of the Vue component\n * @param source - the source loaded (i.e., a call to import). The import must be\n * in the package where the component is as otherwise the import is made\n * relative to this package and the dependency is not found\n * @since 0.7\n * @beta\n */\nexport function registerAsyncComponent<\n  T extends Component = {\n    new (): ComponentPublicInstance;\n  },\n>(\n  app: App,\n  name: string,\n  source: AsyncComponentLoader<T> | AsyncComponentOptions<T>,\n): void {\n  // Register a component as an async component.\n  app.component(name, defineAsyncComponent(source));\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport type { Document } from \"../api/document\";\n\n/**\n * @since 0.1\n * @beta\n */\nexport class JSONLDDocument implements Document {\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  protected jsonld: any;\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(jsonld: any) {\n    this.jsonld = jsonld;\n  }\n\n  getIdentifier(): string {\n    return this.jsonld.identifier;\n  }\n\n  setIdentifier(identifier: string): void {\n    this.jsonld.identifier = identifier;\n  }\n\n  getName(): string {\n    return this.jsonld.name;\n  }\n\n  setName(name: string): void {\n    this.jsonld.name = name;\n  }\n\n  getText(): string {\n    return this.jsonld.text;\n  }\n\n  setText(text: string): void {\n    this.jsonld.text = text;\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get(fieldName: string): any {\n    return this.jsonld[fieldName];\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  set(fieldName: string, value: any): void {\n    this.jsonld[fieldName] = value;\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getSource(): any {\n    return this.jsonld;\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { JSONLDDocument } from \"./JSONLDDocument\";\nimport type { PageData } from \"../api/PageData\";\nimport type { Document } from \"../api/document\";\nimport type { UserDetails } from \"@xwiki/cristal-authentication-api\";\n\n/**\n * @beta\n */\nexport class DefaultPageData implements PageData {\n  id: string;\n  name: string;\n  mode: string = \"\";\n  source: string;\n  syntax: string;\n  html: string;\n  document: Document;\n  css: Array<string>;\n  js: Array<string>;\n  version: string;\n  headline: string = \"\";\n  headlineRaw: string = \"\";\n  lastModificationDate: Date | undefined;\n  lastAuthor: UserDetails | undefined;\n  canEdit: boolean = true;\n\n  public constructor(\n    id: string = \"\",\n    name: string = \"\",\n    source: string = \"\",\n    syntax: string = \"\",\n  ) {\n    this.document = new JSONLDDocument({});\n    this.source = source;\n    this.syntax = syntax;\n    this.html = \"\";\n    this.name = name;\n    this.id = id;\n    this.css = [];\n    this.js = [];\n    this.version = \"\";\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  toObject(): any {\n    return {\n      id: this.id,\n      name: this.name,\n      source: this.source,\n      syntax: this.syntax,\n      html: this.html,\n      document: this.document.getSource(),\n      css: this.css,\n      js: this.js,\n      version: this.version,\n    };\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  fromObject(object: any): void {\n    this.id = object.id;\n    this.name = object.name;\n    this.source = object.source;\n    this.syntax = object.syntax;\n    this.html = object.html;\n    this.document = new JSONLDDocument(object.document);\n    this.css = object.css;\n    this.js = object.js;\n    this.version = object.version;\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\n/**\n * @beta\n */\nexport default class ComponentInit {\n  constructor() {\n    // empty\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { inject, injectable, optional } from \"inversify\";\nimport type { Logger } from \"../api/logger\";\nimport type { LoggerConfig } from \"../api/loggerConfig\";\n\n/**\n * @since 0.1\n * @beta\n */\n@injectable()\nexport class DefaultLogger implements Logger {\n  // @ts-expect-error module is temporarily undefined during class\n  // initialization\n  module: string;\n\n  constructor(\n    @inject(\"LoggerConfig\")\n    @optional()\n    readonly loggerConfig?: LoggerConfig | undefined,\n  ) {}\n\n  setModule(module: string): void {\n    this.module = module;\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  debug(...data: any[]): void {\n    if (!this.loggerConfig || this.loggerConfig.hasLevelId(this.module, 4)) {\n      data.unshift(this.module + \":\");\n    }\n    console.debug.apply(null, data);\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  info(...data: any[]): void {\n    data.unshift(this.module + \":\");\n    console.info.apply(null, data);\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  warn(...data: any[]): void {\n    data.unshift(this.module + \":\");\n    console.warn.apply(null, data);\n  }\n\n  // TODO get rid of any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  error(...data: any[]): void {\n    data.unshift(this.module + \":\");\n    console.error.apply(null, data);\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { injectable } from \"inversify\";\nimport type { LoggerConfig } from \"../api/loggerConfig\";\n\n/**\n * @since 0.1\n * @beta\n */\n@injectable()\nexport class DefaultLoggerConfig implements LoggerConfig {\n  protected config: Map<string, string>;\n  protected computedConfig: Map<string, number>;\n  protected defaultLevel: string;\n  // @ts-expect-error defaultLevelId is temporarily undefined during class\n  // initialization\n  protected defaultLevelId: number;\n  protected levels: Map<string, number> = new Map<string, number>();\n\n  constructor(defaultLevel = \"error\") {\n    this.config = new Map<string, string>();\n    this.defaultLevel = defaultLevel;\n    this.computedConfig = new Map<string, number>();\n    this.levels.set(\"error\", 1);\n    this.levels.set(\"warn\", 2);\n    this.levels.set(\"info\", 3);\n    this.levels.set(\"debug\", 4);\n  }\n\n  addLevel(module: string, level: string): void {\n    const nbLevel = this.levels.get(level);\n    if (nbLevel != undefined) {\n      this.config.forEach((key) => {\n        if (key.startsWith(module)) {\n          const currentLevel = this.computedConfig.get(key);\n          if (currentLevel == null || (nbLevel && nbLevel > currentLevel)) {\n            if (nbLevel) {\n              this.computedConfig.set(key, nbLevel);\n            }\n          }\n        }\n      });\n    }\n  }\n  getLevels(): Map<string, string> {\n    return this.config;\n  }\n\n  getLevel(module: string): string {\n    let level = this.config.get(module);\n    if (!level) {\n      level = this.defaultLevel;\n    }\n    return level;\n  }\n\n  getLevelId(level: string): number {\n    const nbLevel = this.levels.get(level);\n    if (!nbLevel) {\n      return 10;\n    } else {\n      return nbLevel;\n    }\n  }\n\n  setDefaultLevel(level: string): void {\n    this.defaultLevel = level;\n    this.defaultLevelId = this.getLevelId(this.defaultLevel);\n  }\n\n  getDefaultLevel(): string {\n    return this.defaultLevel;\n  }\n\n  getDefaultLevelId(): number {\n    if (this.defaultLevelId) {\n      return this.defaultLevelId;\n    } else {\n      this.defaultLevelId = this.getLevelId(this.defaultLevel);\n      return this.defaultLevelId;\n    }\n  }\n\n  hasLevel(module: string, level: string): boolean {\n    let nbLevel = this.computedConfig.get(module);\n    if (!nbLevel) {\n      nbLevel = this.getDefaultLevelId();\n    }\n    const demandedLevel = this.getLevelId(level);\n\n    if (demandedLevel) {\n      if (nbLevel >= demandedLevel) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  hasLevelId(module: string, levelId: number): boolean {\n    let nbLevel = this.computedConfig.get(module);\n    if (!nbLevel) {\n      nbLevel = this.getDefaultLevelId();\n    }\n    const demandedLevel = levelId;\n\n    if (demandedLevel) {\n      if (nbLevel >= demandedLevel) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\n\nimport { inject, injectable } from \"inversify\";\nimport type { WikiConfig } from \"../api/WikiConfig\";\nimport type { CristalApp } from \"../api/cristalApp\";\nimport type { Logger } from \"../api/logger\";\nimport type { Storage } from \"../api/storage\";\nimport type { WrappingStorage } from \"../api/wrappingStorage\";\n\n/**\n * @since 0.16\n * @beta\n */\nexport type ConfigObjectType = {\n  name: string;\n  baseURL: string;\n  baseRestURL: string;\n  homePage: string;\n  serverRendering: boolean;\n  designSystem: string;\n  offline: boolean;\n  realtimeURL?: string;\n  authenticationBaseURL?: string;\n  authenticationManager?: string;\n  storageRoot?: string;\n  editor?: string;\n};\n\n/**\n * @since 0.1\n * @beta\n */\n@injectable()\nexport class DefaultWikiConfig implements WikiConfig {\n  // @ts-expect-error name is temporarily undefined during class\n  // initialization\n  public name: string;\n  // @ts-expect-error baseURL is temporarily undefined during class\n  // initialization\n  public baseURL: string;\n  // @ts-expect-error baseRestURL is temporarily undefined during class\n  // initialization\n  public baseRestURL: string;\n\n  /**\n   * Realtime endpoint URL.\n   * @since 0.11\n   * @beta\n   */\n  public realtimeURL?: string;\n\n  /**\n   * Authentication server base URL.\n   * @since 0.15\n   * @beta\n   */\n  authenticationBaseURL?: string;\n\n  /**\n   * Authentication Manager component to use.\n   * By default, resolves to configuration type.\n   * @since 0.16\n   * @beta\n   */\n  authenticationManager?: string;\n\n  // @ts-expect-error homePage is temporarily undefined during class\n  // initialization\n  public homePage: string;\n  // @ts-expect-error storage is temporarily undefined during class\n  // initialization\n  public storage: Storage;\n  // @ts-expect-error serverRendering is temporarily undefined during class\n  // initialization\n  public serverRendering: boolean;\n  // @ts-expect-error designSystem is temporarily undefined during class\n  // initialization\n  public designSystem: string;\n  // @ts-expect-error editor is temporarily undefined during class\n  // initialization\n  public editor: string;\n  // @ts-expect-error offline is temporarily undefined during class\n  // initialization\n  public offline: boolean;\n  public offlineSetup: boolean;\n\n  /**\n   * Root location to store pages.\n   * @since 0.16\n   * @beta\n   */\n  storageRoot?: string;\n\n  // @ts-expect-error cristal is temporarily undefined during class\n  // initialization\n  public cristal: CristalApp;\n  public logger: Logger;\n\n  constructor(@inject(\"Logger\") logger: Logger) {\n    this.logger = logger;\n    this.logger.setModule(\"storage.components.defaultWikiStorage\");\n    this.offlineSetup = false;\n  }\n\n  setConfig(\n    name: string,\n    baseURL: string,\n    baseRestURL: string,\n    homePage: string,\n    serverRendering: boolean,\n    designSystem: string,\n    offline: boolean,\n    editor: string,\n    optional?: {\n      realtimeURL?: string;\n      authenticationBaseURL?: string;\n      authenticationManager?: string;\n      storageRoot?: string;\n    },\n  ): void {\n    Object.assign<WikiConfig, ConfigObjectType>(this, {\n      name,\n      baseURL,\n      baseRestURL,\n      homePage,\n      serverRendering,\n      designSystem,\n      offline,\n      editor,\n      ...optional,\n    });\n  }\n\n  setConfigFromObject(configObject: ConfigObjectType): void {\n    Object.assign<WikiConfig, ConfigObjectType>(this, configObject);\n  }\n\n  // TODO: reduce the number of statements in the following method and reactivate the disabled eslint rule.\n  // eslint-disable-next-line max-statements\n  setupOfflineStorage(): void {\n    this.logger.debug(\"Checking offline storage\");\n    if (this.offline && this.cristal) {\n      this.logger.debug(\"Looking for wrapping offline storage\");\n      const wrappingOfflineStorage = this.cristal\n        .getContainer()\n        .get<WrappingStorage>(\"WrappingStorage\");\n      if (wrappingOfflineStorage) {\n        this.logger.debug(\"Offline local storage is ready\");\n        wrappingOfflineStorage.setStorage(this.storage);\n        wrappingOfflineStorage.setWikiConfig(this.storage.getWikiConfig());\n        this.storage = wrappingOfflineStorage;\n      } else {\n        this.logger.debug(\"Failed Looking for wrapping offline storage\");\n      }\n    } else {\n      if (!this.cristal) {\n        this.logger.debug(\"Cristal not initialized\");\n      }\n      if (!this.offline) {\n        this.logger.debug(\"Offline mode not activated\");\n      }\n    }\n  }\n\n  isSupported(format: string): boolean {\n    return format == \"html\";\n  }\n\n  initialize(): void {\n    if (this.offline && !this.offlineSetup) {\n      this.setupOfflineStorage();\n      this.offlineSetup = true;\n      this.storage.isStorageReady();\n    }\n  }\n\n  defaultPageName(): string {\n    return \"index\";\n  }\n\n  getType(): string {\n    return \"Default\";\n  }\n\n  getNewPageDefaultName(): string {\n    return \"newpage\";\n  }\n}\n"],"names":["registerAsyncComponent","app","name","source","defineAsyncComponent","JSONLDDocument","jsonld","identifier","text","fieldName","value","DefaultPageData","id","syntax","object","ComponentInit","DefaultLogger","loggerConfig","module","data","__decorateClass","injectable","__decorateParam","optional","DefaultLoggerConfig","defaultLevel","level","nbLevel","key","currentLevel","demandedLevel","levelId","DefaultWikiConfig","logger","baseURL","baseRestURL","homePage","serverRendering","designSystem","offline","editor","configObject","wrappingOfflineStorage","format"],"mappings":"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"}