<plexus>

  <!-- Configure Plexus to use XWiki's lifecycle and XWiki's own phases -->
  <lifecycle-handler-manager implementation="org.codehaus.plexus.lifecycle.DefaultLifecycleHandlerManager">
    <lifecycle-handlers>
      <lifecycle-handler implementation="org.xwiki.plexus.lifecycle.XWikiLifecycleHandler">
        <id>xwiki</id>
        <name>XWiki Lifecycle Handler</name>
        <begin-segment>
          <!-- Let Plexus do the component injection -->
          <phase implementation="org.xwiki.plexus.lifecycle.phase.LogEnablePhase"/>
          <phase implementation="org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase"/>
          <phase implementation="org.codehaus.plexus.personality.plexus.lifecycle.phase.AutoConfigurePhase"/>
          <!-- See the comment below to understand why this is commented out -->
          <!--phase implementation="org.codehaus.plexus.registry.RegistryConfigurePhase"/-->
          <phase implementation="org.xwiki.plexus.lifecycle.phase.ComposePhase"/>
          <phase implementation="org.xwiki.plexus.lifecycle.phase.InitializePhase"/>
        </begin-segment>
        <end-segment/>
      </lifecycle-handler>
    </lifecycle-handlers>
  </lifecycle-handler-manager>

  <components>
    <!-- The registry component allows using Jakarta Commons Configuration to store configuration
         data for XWiki components, in addition to using components.xml files. This allows storing
         configurations files in various formats (properties file, xml files, in a database, etc).
         See Jakarta Commons Configuration for all options.
    -->
    <!-- Note: We're not using it yet. We need to ensure it works fine before we do so. We
         haven't tested it yet. We also need to decide if we need to implement our own solution.
         For example the current Registry implementation will not let component access to general
         configuration data, only those configured for the component in question.
    <component>
      <role>org.codehaus.plexus.registry.Registry</role>
      <implementation>org.codehaus.plexus.registry.commons.CommonsConfigurationRegistry</implementation>
      <role-hint>commons-configuration</role-hint>
      <configuration>
        <properties>
          Q: How can we put this file in WEB-INF/
          <properties fileName="xwiki.properties" config-at="org.xwiki"/>
        </properties>
      </configuration>
     </component-->
  </components>

</plexus>


