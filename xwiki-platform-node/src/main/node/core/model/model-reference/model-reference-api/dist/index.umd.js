(function(s,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("@xwiki/cristal-model-api"),require("inversify")):typeof define=="function"&&define.amd?define(["exports","@xwiki/cristal-model-api","inversify"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s["cristal_model-reference-api"]={},s.cristalModelApi,s.inversify))})(this,function(s,l,c){"use strict";var g=Object.getOwnPropertyDescriptor,v=(e,r,t,i)=>{for(var n=i>1?void 0:i?g(r,t):r,o=e.length-1,a;o>=0;o--)(a=e[o])&&(n=a(n)||n);return n};let p=class{createDocumentReference(e,r){return new l.DocumentReference(e,r)}getTitle(e){switch(e.type){case l.EntityType.WIKI:return e.name;case l.EntityType.SPACE:return[...e.names].pop();case l.EntityType.DOCUMENT:return e.name;case l.EntityType.ATTACHMENT:return e.name}return""}};p=v([c.injectable()],p);var y=Object.getOwnPropertyDescriptor,m=(e,r,t,i)=>{for(var n=i>1?void 0:i?y(r,t):r,o=e.length-1,a;o>=0;o--)(a=e[o])&&(n=a(n)||n);return n},P=(e,r)=>(t,i)=>r(t,i,e);let d=class{constructor(e){this.cristalApp=e}get(e){const r=this.cristalApp.getContainer(),t=e||this.cristalApp.getWikiConfig().getType();return r.isBound("ModelReferenceHandler",{name:t})?r.get("ModelReferenceHandler",{name:t}):r.get("ModelReferenceHandler")}};d=m([c.injectable(),P(0,c.inject("CristalApp"))],d);var _=Object.getOwnPropertyDescriptor,h=(e,r,t,i)=>{for(var n=i>1?void 0:i?_(r,t):r,o=e.length-1,a;o>=0;o--)(a=e[o])&&(n=a(n)||n);return n},C=(e,r)=>(t,i)=>r(t,i,e);let u=class{constructor(e){this.cristalApp=e}get(e){const r=e||this.cristalApp.getWikiConfig().getType();try{return this.cristalApp.getContainer().get("ModelReferenceParser",{name:r})}catch(t){this.cristalApp.getLogger("model-reference.api").warn(`Couldn't resolve ModelReferenceParser for type=[${r}]`,t);return}}};u=h([c.injectable(),C(0,c.inject("CristalApp"))],u);var T=Object.getOwnPropertyDescriptor,R=(e,r,t,i)=>{for(var n=i>1?void 0:i?T(r,t):r,o=e.length-1,a;o>=0;o--)(a=e[o])&&(n=a(n)||n);return n},D=(e,r)=>(t,i)=>r(t,i,e);let f=class{constructor(e){this.cristalApp=e}get(e){const r=e||this.cristalApp.getWikiConfig().getType();try{return this.cristalApp.getContainer().get("ModelReferenceSerializer",{name:r})}catch(t){this.cristalApp.getLogger("model-reference.api").warn(`Couldn't resolve ModelReferenceSerializer for type=[${r}]`,t);return}}};f=R([c.injectable(),D(0,c.inject("CristalApp"))],f);class w{constructor(r){r.bind("ModelReferenceHandler").to(p).inSingletonScope().whenDefault(),r.bind("ModelReferenceHandlerProvider").to(d).inSingletonScope(),r.bind("ModelReferenceParserProvider").to(u).inSingletonScope(),r.bind("ModelReferenceSerializerProvider").to(f).inSingletonScope()}}s.ComponentInit=w,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
