{"version":3,"file":"xwiki-internal-link-serializer-Cd8xorru.js","sources":["../src/markdown/internal-links/serializer/xwiki-internal-link-serializer.ts"],"sourcesContent":["/**\n * See the LICENSE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\nimport { injectable } from \"inversify\";\nimport type { InternalLinksSerializer } from \"./internal-links-serializer\";\nimport type { UniAstToMarkdownConverter } from \"../../uni-ast-to-markdown-converter\";\nimport type { Link, LinkTarget } from \"@xwiki/cristal-uniast-api\";\n\n/**\n * @since 0.22\n */\n@injectable()\nexport class XWikiInternalLinkSerializer implements InternalLinksSerializer {\n  async serialize(\n    content: Link[\"content\"],\n    target: Extract<LinkTarget, { type: \"internal\" }>,\n    uniAstToMarkdownConverter: UniAstToMarkdownConverter,\n  ): Promise<string> {\n    return `[[${await uniAstToMarkdownConverter.convertInlineContents(\n      content,\n    )}|${target.rawReference}]]`;\n  }\n\n  async serializeImage(\n    target: Extract<LinkTarget, { type: \"internal\" }>,\n    alt?: string,\n  ): Promise<string> {\n    return `![[${alt ?? \"\"}${alt ? \"|\" : \"\"}${target.rawReference}]]`;\n  }\n}\n"],"names":["XWikiInternalLinkSerializer","content","target","uniAstToMarkdownConverter","alt","__decorateClass","injectable"],"mappings":";;;;;;AA4BO,IAAMA,IAAN,MAAqE;AAAA,EAC1E,MAAM,UACJC,GACAC,GACAC,GACiB;AACjB,WAAO,KAAK,MAAMA,EAA0B;AAAA,MAC1CF;AAAA,IAAA,CACD,IAAIC,EAAO,YAAY;AAAA,EAC1B;AAAA,EAEA,MAAM,eACJA,GACAE,GACiB;AACjB,WAAO,MAAMA,KAAO,EAAE,GAAGA,IAAM,MAAM,EAAE,GAAGF,EAAO,YAAY;AAAA,EAC/D;AACF;AAjBaF,IAANK,EAAA;AAAA,EADNC,EAAA;AAAW,GACCN,CAAA;"}